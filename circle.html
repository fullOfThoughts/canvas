<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      * {
        padding: 0;
        margin: 0;
        box-sizing: border-box;
      }
    </style>
    <script>
      window.onload = () => {
        let WW = window.innerWidth
        let WH = window.innerHeight
        document.querySelector('canvas').style.display = 'block'

        document.querySelector('canvas').width = WW
        document.querySelector('canvas').height = WH

        class Circle {
          constructor() {
            this.canvas = document.querySelector('canvas')
            this.ctx = this.canvas.getContext('2d')
            this.XXX =
              [-1, 1][Math.floor(Math.random() * 2)] * Math.random() * 1
            this.YYY =
              [-1, 1][Math.floor(Math.random() * 2)] * Math.random() * 1
          }
          //  init
          init() {
            //  定义半径范围
            this.r = 1 + Math.random() * 2
            //  定义颜色范围
            this.color = [
              '#70f3ff',
              '#ff461f',
              '#bce672',
              '#eaff56',
              '#8d4bbb',
            ][Math.floor(Math.random() * 5)]

            //  定义圆心坐标
            this.center = {
              x: Math.random() * this.ctx.canvas.width,
              y: Math.random() * this.ctx.canvas.height,
            }
          }
          //  定义画布尺寸

          //  批量处理圆形
          drawCircle() {
            const ctx = this.ctx
            const r = this.r

            const center = this.center
            const color = this.color
            ctx.beginPath()

            ctx.arc(center.x, center.y, r, 0, 2 * Math.PI)
            ctx.fillStyle = color

            ctx.fill()
            ctx.stroke()
          }
          //  移动
          move() {
            this.center.x += this.XXX

            this.center.y += this.YYY
            if (this.center.x + this.r >= WW || this.center.x <= this.r) {
              this.XXX = -this.XXX
            } else {
              this.XXX =
                [-1, 1][Math.floor(Math.random() * 2)] * Math.random() * 1
            }
            if (this.center.y <= this.r || this.center.y + this.r >= WH) {
              this.YYY = -this.YYY
            } else {
              this.YYY =
                [-1, 1][Math.floor(Math.random() * 2)] * Math.random() * 1
            }
            this.drawCircle()
          }
        }
        const arr = []
        function creatwCircle() {
          for (let i = 0; i < 666; i++) {
            let circle = new Circle()
            circle.init()
            circle.drawCircle()
            arr.push(circle)
          }
        }
        creatwCircle()
        setInterval(() => {
          const ctx = document.querySelector('canvas').getContext('2d')
          ctx.beginPath()
          ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)
          arr.forEach((item) => {
            item.move()
          })
        }, 1000 / 60)
      }
    </script>
  </head>
  <body>
    <canvas></canvas>
  </body>
</html>
